{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=5)}({5:function(e,t){let n=new class{start(e){this.id=setInterval(e,1e3/15)}stop(){clearInterval(this.id)}};var r={},o=null,i={};figma.showUI(__html__,{width:375,height:500}),figma.ui.onmessage=e=>{if(\"check-done\"===e.type)o=null;else if(\"window-blur\"===e.type)n.start(s);else if(\"window-focus\"===e.type)n.stop();else if(\"select-node\"===e.type){var t=figma.getNodeById(e.id);figma.currentPage.selection=[t],figma.viewport.center={x:t.absoluteTransform[0][2],y:t.absoluteTransform[1][2]}}else if(\"update-colors\"===e.type){t=figma.getNodeById(e.id);var u=figma.getNodeById(i[e.id]),g=e.textColor,h=e.backgroundColor;t.setRangeFills(0,t.characters.length,[{type:\"SOLID\",color:{r:g[0]/255,g:g[1]/255,b:g[2]/255}}]),\"FRAME\"==u.type?u.backgrounds=[{type:\"SOLID\",color:{r:h[0]/255,g:h[1]/255,b:h[2]/255}}]:(u=u).fills=[{type:\"SOLID\",color:{r:h[0]/255,g:h[1]/255,b:h[2]/255}}]}else if(\"check-contrast\"===e.type){var y=null==o?figma.currentPage.selection[0]:o;o=null==o?figma.currentPage.selection[0]:o;var b=y.findAll(e=>\"TEXT\"===e.type&&p(e)&&d(e)&&\"symbol\"!=typeof e.fills),m=y.findAll(e=>(\"RECTANGLE\"===e.type||\"VECTOR\"===e.type||\"FRAME\"===e.type)&&p(e)&&d(e));d(y)&&m.push(y);var v=[],x=[],w=[];for(let e of b){var T=l(m.filter(t=>f(e,t)));if(null!=T&&e===a(e,T)){i[e.id]=T.id;g=e.fills[0].color;var M=y.backgrounds.length>0?y.backgrounds[0].color:null,O=null!=T?T.fills[0].color:M;if(null!=O){var S=c(g,O),I=e.fontSize;I>=19&&S<3||I<19&&S<4.5?v.push({nodeID:e.id,textColor:g,bgColor:O,contrastRatio:S,fontSize:I}):I>=19&&S<4.5||I<19&&S<7?x.push({nodeID:e.id,textColor:g,bgColor:O,contrastRatio:S,fontSize:I}):w.push({nodeID:e.id,textColor:g,bgColor:O,contrastRatio:S,fontSize:I})}}}r=v.length+x.length===0?{type:\"check-pass\",frameName:y.name,inaccessibleTexts:v,aaTexts:x}:{type:\"check-fail\",frameName:y.name,inaccessibleTexts:v,aaTexts:x},figma.ui.postMessage(r)}};var a=(e,t)=>{var n=function e(t,n,r){return t.parent==n.parent?t===o?o:t.parent:r.includes(t)?t:r.includes(n)?n:t===o?e(t,n.parent,r.concat([n])):n===o?e(t.parent,n,r.concat([t])):e(t.parent,n.parent,r.concat([t,n]))}(e,t,[]);if(e===n)return t;if(t===n)return e;for(var r=e,i=t;r.parent!==n;)r=r.parent;for(;i.parent!==n;)i=i.parent;return n.children.indexOf(r)>n.children.indexOf(i)?e:t};function l(e){return 0==e.length?null:1==e.length?e[0]:e.reduce(a)}function s(){r={type:\"disable-buttons\",isDisabled:!(figma.currentPage.selection.length>0&&\"FRAME\"==figma.currentPage.selection[0].type)},figma.ui.postMessage(r),r={type:\"recheck-contrast\"},figma.ui.postMessage(r)}function u(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function c(e,t){var n=.2126*u(e.r)+.7152*u(e.g)+.0722*u(e.b),r=.2126*u(t.r)+.7152*u(t.g)+.0722*u(t.b),o=(Math.max(n,r)+.05)/(Math.min(n,r)+.05);return parseFloat(o.toFixed(2))}function f(e,t){return t={x:t.absoluteTransform[0][2],y:t.absoluteTransform[1][2],width:t.width,height:t.height,visible:t.visible},e={x:e.absoluteTransform[0][2],y:e.absoluteTransform[1][2],width:e.width,height:e.height},!0===t.visible&&t.x<=e.x+e.width&&t.x+t.width>=e.x&&t.y<=e.y+e.height&&t.y+t.height>=e.y}function p(e){return\"PAGE\"==e.parent.type?e.visible:!(!e.visible||e.opacity<1||\"annotation\"==e.parent.getSharedPluginData(\"a11y\",\"type\"))&&p(e.parent)}function d(e){return\"FRAME\"==e.type?1==e.backgrounds.length:1==e.fills.length&&1==e.fills[0].opacity}}});","extractedComments":[]}